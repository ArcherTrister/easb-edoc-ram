<Queries>
  <Deals>
    <BoundDealByStatusName>SELECT d.dealnum as dealNumber, d.dealname as dealName, d.status as statusCode, st.name as status, d.contractnum as contractNumber,FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate, FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate, dp.ModelPriority as priority, FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,d.uw1 as primaryUnderwriterCode, uw_n.FullName as primaryUnderwriterName, d.uw2 as secondaryUnderwriterCode, uw2_n.FullName as secondaryUnderwriterName,dp.TA as technicalAssistantCode, ta_n.FullName as technicalAssistantName, d.Modeller as modellerCode, m_n.FullName as modellerName, d.act1 as actuaryCode, a_n.FullName as actuaryName, FORMAT(d.expirydate,'MM-dd-yyyy') as expiryDate, d.source as brokerCode, n3.Name as brokerName, d.bbroker as brokerContactCode, n5.Name as brokerContactName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 0 AND NOT EXISTS (SELECT 1 FROM dbo.tb_chklistvals tc WHERE tc.entitynum = 1 AND tc.chklistnum = 100 AND tc.key1 = d.dealnum)</BoundDealByStatusName>
    <OnHoldDealByStatusName>
      SELECT d.dealnum as dealNumber,d.dealname as dealName,d.status as statusCode, st.name as status, d.contractnum as contractNumber,FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate, FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate, dp.ModelPriority as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,d.uw1 as primaryUnderwriterCode,uw_n.FullName as primaryUnderwriterName,d.uw2 as secondaryUnderwriterCode, uw2_n.FullName as secondaryUnderwriterName,dp.TA as technicalAssistantCode, ta_n.FullName as technicalAssistantName, d.Modeller as modellerCode,
      m_n.FullName as modellerName, d.act1 as actuaryCode, a_n.FullName as actuaryName, FORMAT(d.expirydate,'MM-dd-yyyy') as expiryDate, d.source as brokerCode,
      n3.Name as brokerName, d.bbroker as brokerContactCode, n5.Name as brokerContactName,d.cpartynum as cedantCode,
      n6.name as cedantName,d.Continuous as continuous,d.cpartylocation as cedantLocationCode,l6.locationName as cedantLocationName,
      d.sourcelocation as brokerLocationCode,l.locationName as brokerLocationName,p.companyname as paper,d.renewal as renewal,d.Expiry_EOD as expiresAtEndOfDate,
      d.exposuretype as exposureTypeCode,d.reinsurance as dealTypeCode,dt.name as dealTypeName,d.covtype as coverageType,
      cb.name as coverageName,d.policybasis as policyBasis,pb.name as policyBasisName,d.currency as currencyCode,
      cr.currname as currencyName,d.territory as domicileCode,dm.country as domicileName,d.Region as regionCode,
      rg.name as regionName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb
      ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st
      ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) LEFT OUTER JOIN tb_location l
      ON (d.sourcelocation = l.LocationId) LEFT OUTER JOIN tb_catalogitems dt ON dt.catid = 79 AND (d.reinsurance = dt.code) LEFT OUTER JOIN tb_catalogitems cb ON cb.catid = 87 AND (d.covtype = cb.code) LEFT OUTER JOIN tb_catalogitems pb ON pb.catid = 81 AND (d.policybasis = pb.code) LEFT OUTER JOIN tb_currency cr ON (d.currency = cr.currency) LEFT OUTER JOIN tb_country dm ON (d.territory = dm.cnum) LEFT OUTER JOIN tb_catalogitems rg
      ON rg.catid = 145 AND (d.Region = rg.code) LEFT OUTER JOIN tb_Names n6 ON (d.cpartynum = n6.NameId) LEFT OUTER JOIN tb_Location l6
      ON (d.cpartylocation = l6.LocationId)WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 16
    </OnHoldDealByStatusName>
    <InProgressDealByStatusName>SELECT d.dealnum as dealNumber, d.dealname as dealName, d.status as statusCode, st.name as status, d.contractnum as contractNumber,FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate, FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate, dp.ModelPriority as priority, FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,d.uw1 as primaryUnderwriterCode, uw_n.FullName as primaryUnderwriterName, d.uw2 as secondaryUnderwriterCode, uw2_n.FullName as secondaryUnderwriterName,dp.TA as technicalAssistantCode, ta_n.FullName as technicalAssistantName, d.Modeller as modellerCode, m_n.FullName as modellerName, d.act1 as actuaryCode, a_n.FullName as actuaryName, FORMAT(d.expirydate,'MM-dd-yyyy') as expiryDate, d.source as brokerCode, n3.Name as brokerName, d.bbroker as brokerContactCode, n5.Name as brokerContactName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3,80,2,14,29)</InProgressDealByStatusName>
    <UnderReviewDealByStatusName>SELECT d.dealnum as dealNumber, d.dealname as dealName, d.status as statusCode, st.name as status, d.contractnum as contractNumber,FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate, FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate, dp.ModelPriority as priority, FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,d.uw1 as primaryUnderwriterCode, uw_n.FullName as primaryUnderwriterName, d.uw2 as secondaryUnderwriterCode, uw2_n.FullName as secondaryUnderwriterName,dp.TA as technicalAssistantCode, ta_n.FullName as technicalAssistantName, d.Modeller as modellerCode, m_n.FullName as modellerName, d.act1 as actuaryCode, a_n.FullName as actuaryName, FORMAT(d.expirydate,'MM-dd-yyyy') as expiryDate, d.source as brokerCode, n3.Name as brokerName, d.bbroker as brokerContactCode, n5.Name as brokerContactName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3)</UnderReviewDealByStatusName>
    <AuthorizeDealByStatusName>SELECT d.dealnum as dealNumber, d.dealname as dealName, d.status as statusCode, st.name as status, d.contractnum as contractNumber,FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate, FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate, dp.ModelPriority as priority, FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,d.uw1 as primaryUnderwriterCode, uw_n.FullName as primaryUnderwriterName, d.uw2 as secondaryUnderwriterCode, uw2_n.FullName as secondaryUnderwriterName,dp.TA as technicalAssistantCode, ta_n.FullName as technicalAssistantName, d.Modeller as modellerCode, m_n.FullName as modellerName, d.act1 as actuaryCode, a_n.FullName as actuaryName, FORMAT(d.expirydate,'MM-dd-yyyy') as expiryDate, d.source as brokerCode, n3.Name as brokerName, d.bbroker as brokerContactCode, n5.Name as brokerContactName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (80)</AuthorizeDealByStatusName>
    <OutstandingQuoteDealByStatusName>SELECT d.dealnum as dealNumber, d.dealname as dealName, d.status as statusCode, st.name as status, d.contractnum as contractNumber,FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate, FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate, dp.ModelPriority as priority, FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,d.uw1 as primaryUnderwriterCode, uw_n.FullName as primaryUnderwriterName, d.uw2 as secondaryUnderwriterCode, uw2_n.FullName as secondaryUnderwriterName,dp.TA as technicalAssistantCode, ta_n.FullName as technicalAssistantName, d.Modeller as modellerCode, m_n.FullName as modellerName, d.act1 as actuaryCode, a_n.FullName as actuaryName, FORMAT(d.expirydate,'MM-dd-yyyy') as expiryDate, d.source as brokerCode, n3.Name as brokerName, d.bbroker as brokerContactCode, n5.Name as brokerContactName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (2)</OutstandingQuoteDealByStatusName>
    <ToBeDeclinedDealByStatusName>SELECT d.dealnum as dealNumber, d.dealname as dealName, d.status as statusCode, st.name as status, d.contractnum as contractNumber,FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate, FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate, dp.ModelPriority as priority, FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,d.uw1 as primaryUnderwriterCode, uw_n.FullName as primaryUnderwriterName, d.uw2 as secondaryUnderwriterCode, uw2_n.FullName as secondaryUnderwriterName,dp.TA as technicalAssistantCode, ta_n.FullName as technicalAssistantName, d.Modeller as modellerCode, m_n.FullName as modellerName, d.act1 as actuaryCode, a_n.FullName as actuaryName, FORMAT(d.expirydate,'MM-dd-yyyy') as expiryDate, d.source as brokerCode, n3.Name as brokerName, d.bbroker as brokerContactCode, n5.Name as brokerContactName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (14)</ToBeDeclinedDealByStatusName>
    <BoundPendingDataEntryDealByStatusName>SELECT d.dealnum as dealNumber, d.dealname as dealName, d.status as statusCode, st.name as status, d.contractnum as contractNumber,FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate, FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate, dp.ModelPriority as priority, FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,d.uw1 as primaryUnderwriterCode, uw_n.FullName as primaryUnderwriterName, d.uw2 as secondaryUnderwriterCode, uw2_n.FullName as secondaryUnderwriterName,dp.TA as technicalAssistantCode, ta_n.FullName as technicalAssistantName, d.Modeller as modellerCode, m_n.FullName as modellerName, d.act1 as actuaryCode, a_n.FullName as actuaryName, FORMAT(d.expirydate,'MM-dd-yyyy') as expiryDate, d.source as brokerCode, n3.Name as brokerName, d.bbroker as brokerContactCode, n5.Name as brokerContactName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (29)</BoundPendingDataEntryDealByStatusName>
    <RenewableDealByStatusName>SELECT d.dealnum as dealNumber, d.dealname as dealName, d.status as statusCode, st.name as status, d.contractnum as contractNumber,FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate, FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate, dp.ModelPriority as priority, FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,d.uw1 as primaryUnderwriterCode, uw_n.FullName as primaryUnderwriterName, d.uw2 as secondaryUnderwriterCode, uw2_n.FullName as secondaryUnderwriterName,dp.TA as technicalAssistantCode, ta_n.FullName as technicalAssistantName, d.Modeller as modellerCode, m_n.FullName as modellerName, d.act1 as actuaryCode, a_n.FullName as actuaryName, FORMAT(d.expirydate,'MM-dd-yyyy') as expiryDate, d.source as brokerCode, n3.Name as brokerName, d.bbroker as brokerContactCode, n5.Name as brokerContactName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND (d.inceptdate #= GETDATE()) AND (d.termdate IS NULL) AND (d.expirydate BETWEEN DATEADD(DAY, 1, EOMONTH(GETDATE())) AND EOMONTH(GETDATE(), 6) ) AND (d.status = 0)</RenewableDealByStatusName>
  </Deals>
  <DealCount>
    <DealSummary>select statusgroupname as groupstatus, statusgroup as groupstatuscode,statusName as StatusName,statuscode as StatusCode, count(*) as Count FROM [DEV_ERMS].[GRS].[v_GRSDealsByStatus] where statuscode in (3,80,2,14,29,16,1000,1001)</DealSummary>
    <InProgressDealSummaryCountByStatusCode>SELECT 'In Progress' as StatusName ,count(*) as totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3,80,2,14,29)</InProgressDealSummaryCountByStatusCode>
    <UnderReviewDealSummaryCountByStatusCode>SELECT st.name AS StatusName, count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3)</UnderReviewDealSummaryCountByStatusCode>
    <AuthorizeDealSummaryCountByStatusCode>SELECT st.name AS StatusName, count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (80)</AuthorizeDealSummaryCountByStatusCode>
    <OutstandingQuoteDealSummaryCountByStatusCode>SELECT st.name AS StatusName, count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (2)</OutstandingQuoteDealSummaryCountByStatusCode>
    <ToBeDeclinedDealSummaryCountByStatusCode>SELECT st.name AS StatusName, count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (14)</ToBeDeclinedDealSummaryCountByStatusCode>
    <BPDEDealSummaryCountByStatusCode>SELECT st.name AS StatusName, count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (29)</BPDEDealSummaryCountByStatusCode>
    <OnHoldDealSummaryCountByStatusCode>SELECT st.name AS StatusName, count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (16)</OnHoldDealSummaryCountByStatusCode>
    <BoundPendingActionsDealSummaryCountByStatusCode>SELECT st.name AS StatusName, count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 0 AND NOT EXISTS (SELECT 1 FROM dbo.tb_chklistvals tc WHERE tc.entitynum = 1 AND tc.chklistnum = 100 AND tc.key1 = d.dealnum)</BoundPendingActionsDealSummaryCountByStatusCode>
    <Renewable6MonthsDealSummaryCountByStatusCode>SELECT st.name AS StatusName, count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND (d.inceptdate #= GETDATE()) AND (d.termdate IS NULL) AND (d.expirydate BETWEEN DATEADD(DAY, 1, EOMONTH(GETDATE())) AND EOMONTH(GETDATE(), 6) ) AND (d.status = 0)</Renewable6MonthsDealSummaryCountByStatusCode>
  </DealCount>
  <DatabaseVerification>
    <GlobalReDataView>select distinct(division) from [DEV_ERMS].[GRS].[v_GRSDealsByStatus];</GlobalReDataView>
  </DatabaseVerification>
  <SubDivisions>SELECT DISTINCT [Extent1].[SubdivisionID] AS [id], [Extent1].[SubdivisionName] AS [name], [Extent1].[SubdivisionSortOrder] AS [sortOrder],1 as rs FROM [grs].[v_GRSSubdivisionExposure] AS [Extent1] UNION SELECT DISTINCT [Extent1].[ExposureGroupID] AS [id], [Extent1].[ExposureGroup] AS [name],[Extent1].[ExposureGroupSortOrder] AS [sortOrder], 2 as rs FROM [grs].[v_GRSSubdivisionExposure] AS [Extent1] ORDER BY rs</SubDivisions>
  <Teams-Divisions>
    <CasualtyTeamold>AND d.exposuretype IN (SELECT b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('CA - Auto','CA - CA','CA - GL','CA - PL','CA - Cas Fac')))</CasualtyTeamold>
    <CasualtyTreatySubOptionold>AND d.exposuretype IN (SELECT b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('CA - Auto','CA - CA','CA - GL','CA - PL')))</CasualtyTreatySubOptionold>
    <CasualtyFacSubOptionoldld>AND d.exposuretype IN (SELECT b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('CA - Cas Fac')))</CasualtyFacSubOptionoldld>
    <PropertyTeamoldld>AND d.exposuretype IN (SELECT b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('Property International','Property North America')))</PropertyTeamoldld>
    <PropertyInternationalSubOptionold>AND d.exposuretype IN (SELECT b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('Property International')))</PropertyInternationalSubOptionold>
    <PropertyNorthAmericaSubOption>AND d.exposuretype IN (SELECT b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('Property North America')))</PropertyNorthAmericaSubOption>
    <SpecialtyTeamold>AND d.exposuretype IN (SELECT b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('SP - A#H','SP - Agri','SP - Agri - Arc','SP - AV','SP - LPT','SP - M#E','SP - Mortgage','SP - Other','SP - SC','SP - Terrorism','SP - Terrorism - Arc','SP - WC','Whole Account','SP - Public Entity')))</SpecialtyTeamold>
    <SpecialtyNon-PESubOptionold>AND d.exposuretype IN (SELECT b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('SP - A#H','SP - Agri','SP - Agri - Arc','SP - AV','SP - LPT','SP - M#E','SP - Mortgage','SP - Other','SP - SC','SP - Terrorism','SP - Terrorism - Arc','SP - WC','Whole Account')))</SpecialtyNon-PESubOptionold>
    <PublicEntitySubOptionold>AND d.exposuretype IN (SELECT b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('SP - Public Entity')))</PublicEntitySubOptionold>
  </Teams-Divisions>
  <StatusDealCount>
    <BoundDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 0 AND NOT EXISTS (SELECT 1 FROM dbo.tb_chklistvals tc WHERE tc.entitynum = 1 AND tc.chklistnum = 100 AND tc.key1 = d.dealnum)</BoundDealCountByStatus>
    <OnHoldDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 16</OnHoldDealCountByStatus>
    <InProgressDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3,80,2,14,29)</InProgressDealCountByStatus>
    <UnderReviewDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3)</UnderReviewDealCountByStatus>
    <AuthorizeDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (80)</AuthorizeDealCountByStatus>
    <OutstandingQuoteDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (2)</OutstandingQuoteDealCountByStatus>
    <ToBeDeclinedDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (14)</ToBeDeclinedDealCountByStatus>
    <BoundPendingDataEntryDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (29)</BoundPendingDataEntryDealCountByStatus>
    <RenewableDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND (d.inceptdate #= GETDATE()) AND (d.termdate IS NULL) AND (d.expirydate BETWEEN DATEADD(DAY, 1, EOMONTH(GETDATE())) AND EOMONTH(GETDATE(), 6) ) AND (d.status = 0)</RenewableDealCountByStatus>
  </StatusDealCount>
  <PersonsByPersonID>SELECT PersonId as personId,FirstName as firstName,LastName as lastName,(CASE WHEN CommonName IS NULL THEN (CASE WHEN PersonName IS NULL THEN Firstname + LastName ELSE PersonName END) ELSE CommonName END) as displayName from tb_person where PersonId = (SELECT TOP 1 tn.NameId FROM dbo.tb_Names tn WHERE tn.Name like '%Janardanan Nair%' ORDER BY tn.NameId desc)</PersonsByPersonID>
  <PersonProfile>
    <UWManagerPersonProfile>SET ANSI_NULLS, ANSI_WARNINGS, ANSI_PADDING ON; SET QUOTED_IDENTIFIER OFF; select STUFF(( SELECT DISTINCT ' ,' + CAST(t.ExposureGroupID AS varchar(5)) FROM grs.v_GRSSubdivisionExposure t INNER JOIN dbo.cfgSetting s ON s.Name = 'Subdivisions Defaults' INNER JOIN dbo.cfgFact f ON f.SettingFK = s.SettingPK LEFT OUTER JOIN dbo.cfgRole r ON r.RolePK = f.RoleFK LEFT OUTER JOIN tb_person p ON f.PersonFK = p.PersonId WHERE f.FactValue = cast(t.ExposureGroupID AS varchar(5)) AND f.RoleFK IN (SELECT DISTINCT crp.RoleFK  FROM tb_user u join dbo.tb_userLogins tul ON u.userid = tul.userid AND u.IsEnabled = 1 AND tul.IsEnabled = u.IsEnabled JOIN dbo.tb_Person tp ON tp.PersonSID = u.ContactNum JOIN dbo.cfgRolePerson crp ON crp.PersonNameFK = tp.PersonId WHERE tul.LoginName LIKE 'Andrew%Barnard%@markel%') AND (f.PersonFK IN (SELECT DISTINCT tp.PersonId  FROM tb_user u join dbo.tb_userLogins tul ON u.userid = tul.userid AND u.IsEnabled = 1 AND tul.IsEnabled = u.IsEnabled JOIN dbo.tb_Person tp ON tp.PersonSID = u.ContactNum JOIN dbo.cfgRolePerson crp ON crp.PersonNameFK = tp.PersonId WHERE tul.LoginName LIKE 'Andrew%Barnard%@markel%') OR f.PersonFK IS NULL ) FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,2,'') AS defaultSubdivisions; SET ANSI_NULLS, ANSI_WARNINGS, ANSI_PADDING OFF;  SET QUOTED_IDENTIFIER ON;</UWManagerPersonProfile>
    <PTAPersonProfile>SET ANSI_NULLS, ANSI_WARNINGS, ANSI_PADDING ON; SET QUOTED_IDENTIFIER OFF; select STUFF(( SELECT DISTINCT ' ,' + CAST(t.ExposureGroupID AS varchar(5)) FROM grs.v_GRSSubdivisionExposure t INNER JOIN dbo.cfgSetting s ON s.Name = 'Subdivisions Defaults' INNER JOIN dbo.cfgFact f ON f.SettingFK = s.SettingPK LEFT OUTER JOIN dbo.cfgRole r ON r.RolePK = f.RoleFK LEFT OUTER JOIN tb_person p ON f.PersonFK = p.PersonId WHERE f.FactValue = cast(t.ExposureGroupID AS varchar(5)) AND f.RoleFK IN (SELECT DISTINCT crp.RoleFK  FROM tb_user u join dbo.tb_userLogins tul ON u.userid = tul.userid AND u.IsEnabled = 1 AND tul.IsEnabled = u.IsEnabled JOIN dbo.tb_Person tp ON tp.PersonSID = u.ContactNum JOIN dbo.cfgRolePerson crp ON crp.PersonNameFK = tp.PersonId WHERE tul.LoginName LIKE 'Elena.Marshall%@markelcorp%') AND (f.PersonFK IN (SELECT DISTINCT tp.PersonId  FROM tb_user u join dbo.tb_userLogins tul ON u.userid = tul.userid AND u.IsEnabled = 1 AND tul.IsEnabled = u.IsEnabled JOIN dbo.tb_Person tp ON tp.PersonSID = u.ContactNum JOIN dbo.cfgRolePerson crp ON crp.PersonNameFK = tp.PersonId WHERE tul.LoginName LIKE 'Elena.Marshall%@markelcorp%') OR f.PersonFK IS NULL ) FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,2,'') AS defaultSubdivisions; SET ANSI_NULLS, ANSI_WARNINGS, ANSI_PADDING OFF;  SET QUOTED_IDENTIFIER ON;</PTAPersonProfile>
  </PersonProfile>
  <NotUsed>
    <DealCountByStatus>SELECT ci.code AS 'statusid' , ci.name AS 'statusName', ISNULL(deals.Count,0) AS count FROM dbo.tb_catalogitems ci LEFT OUTER JOIN (SELECT d.status, COUNT(d.dealnum) AS 'Count' FROM GRS.v_GRDeals d WHERE d.inceptdate > '20171001' GROUP BY d.status) deals ON deals.status  = ci.code WHERE ci.catid = 7  AND ci.active = 1 AND ci.code IN (80, 2, 3, 29, 14) ORDER BY ci.catorder;</DealCountByStatus>
    <BoundDealCountByStatusName>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 0 AND NOT EXISTS (SELECT 1 FROM dbo.tb_chklistvals tc WHERE tc.entitynum = 1 AND tc.chklistnum = 100 AND tc.key1 = d.dealnum);</BoundDealCountByStatusName>
    <OnHoldDealCountByStatusName>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 16;</OnHoldDealCountByStatusName>
    <InProgressDealCountByStatusName>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3,80,2,14,29);</InProgressDealCountByStatusName>
    <UnderReviewDealCountByStatusName>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3);</UnderReviewDealCountByStatusName>
    <AuthorizeDealCountByStatusName>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (80)</AuthorizeDealCountByStatusName>
    <OutstandingQuoteDealCountByStatusName>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (2);</OutstandingQuoteDealCountByStatusName>
    <ToBeDeclinedDealCountByStatusName>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (14);</ToBeDeclinedDealCountByStatusName>
    <BoundPendingDataEntryDealCountByStatusName>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (29);</BoundPendingDataEntryDealCountByStatusName>
    <RenewableDealCountByStatusName>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND (d.inceptdate #= GETDATE()) AND (d.termdate IS NULL) AND (d.expirydate BETWEEN DATEADD(DAY, 1, EOMONTH(GETDATE())) AND EOMONTH(GETDATE(), 6) ) AND (d.status = 0);</RenewableDealCountByStatusName>
  </NotUsed>
  <New-Teams-Divisions>
    <CasualtyTeam>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('CA - Auto','CA - CA','CA - GL','CA - PL','CA - Cas Fac')))</CasualtyTeam>
    <CasualtyTreatySubOption>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('CA - Auto','CA - CA','CA - GL','CA - PL')))</CasualtyTreatySubOption>
    <CasualtyFacSubOption>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('CA - Cas Fac')))</CasualtyFacSubOption>
    <PropertyTeam>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('Property International','Property North America')))</PropertyTeam>
    <PropertyInternationalSubOption>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('Property International')))</PropertyInternationalSubOption>
    <PropertyNorthAmericaSubOption>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('Property North America')))</PropertyNorthAmericaSubOption>
    <SpecialtyTeam>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('SP - A#H','SP - Agri','SP - Agri - Arc','SP - AV','SP - LPT','SP - M#E','SP - Mortgage','SP - Other','SP - SC','SP - Terrorism','SP - Terrorism - Arc','SP - WC','Whole Account','SP - Public Entity')))</SpecialtyTeam>
    <SpecialtyNon-PESubOption>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('SP - A#H','SP - Agri','SP - Agri - Arc','SP - AV','SP - LPT','SP - M#E','SP - Mortgage','SP - Other','SP - SC','SP - Terrorism','SP - Terrorism - Arc','SP - WC','Whole Account')))</SpecialtyNon-PESubOption>
    <PublicEntitySubOption>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('SP - Public Entity')))</PublicEntitySubOption>
    <AllTeams>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('CA - Auto','CA - CA','CA - GL','CA - PL','CA - Cas Fac','Property International','Property North America','SP - A#H','SP - Agri','SP - Agri - Arc','SP - AV','SP - LPT','SP - M#E','SP - Mortgage','SP - Other','SP - SC','SP - Terrorism','SP - Terrorism - Arc','SP - WC','Whole Account','SP - Public Entity')))</AllTeams>
  </New-Teams-Divisions>
  <UWManager>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (select distinct  t.exposuretype   FROM grs.v_GRSSubdivisionExposure t INNER JOIN dbo.cfgSetting s ON s.Name = 'Subdivisions Defaults' INNER JOIN dbo.cfgFact f ON f.SettingFK = s.SettingPK LEFT OUTER JOIN dbo.cfgRole r ON r.RolePK = f.RoleFK LEFT OUTER JOIN tb_person p ON f.PersonFK = p.PersonId WHERE f.FactValue = cast(t.ExposureGroupID AS varchar(5)) AND f.RoleFK IN (SELECT DISTINCT crp.RoleFK  FROM tb_user u join dbo.tb_userLogins tul ON u.userid = tul.userid AND u.IsEnabled = 1 AND tul.IsEnabled = u.IsEnabled JOIN dbo.tb_Person tp ON tp.PersonSID = u.ContactNum JOIN dbo.cfgRolePerson crp ON crp.PersonNameFK = tp.PersonId WHERE tul.LoginName LIKE 'Andrew%Barnard%@markel%') AND (f.PersonFK IN (SELECT DISTINCT tp.PersonId  FROM tb_user u join dbo.tb_userLogins tul ON u.userid = tul.userid AND u.IsEnabled = 1 AND tul.IsEnabled = u.IsEnabled JOIN dbo.tb_Person tp ON tp.PersonSID = u.ContactNum JOIN dbo.cfgRolePerson crp ON crp.PersonNameFK = tp.PersonId WHERE tul.LoginName LIKE 'Andrew%Barnard%@markel%') OR f.PersonFK IS NULL )))</UWManager>
  <SETUSERENV>SET ANSI_NULLS, ANSI_WARNINGS, ANSI_PADDING ON; SET QUOTED_IDENTIFIER OFF; </SETUSERENV>
  <UNSETUSERENV>SET ANSI_NULLS, ANSI_WARNINGS, ANSI_PADDING OFF; SET QUOTED_IDENTIFIER ON; </UNSETUSERENV>
  <PropertyTA>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('Property International','Property North America')))</PropertyTA>
  <DealStatusLookup>select name as [name] ,CAST(code AS varchar(max)) AS value,FloatData1 as [group], CASE WHEN active = 1 THEN 'true' WHEN active = 0 THEN 'false' END AS isActive FROM tb_catalogitems WHERE catid = 7 and active = 1 and code #= 0 order by catorder asc</DealStatusLookup>
  <DealDetailsByDealNumber>SELECT d.dealnum as dealNumber, d.dealname as dealName, d.status as statusCode, st.name as status, d.contractnum as contractNumber,FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate, FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate, dp.ModelPriority as priority, FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,d.uw1 as primaryUnderwriterCode, uw_n.FullName as primaryUnderwriterName, d.uw2 as secondaryUnderwriterCode, uw2_n.FullName as secondaryUnderwriterName,dp.TA as technicalAssistantCode, ta_n.FullName as technicalAssistantName, d.Modeller as modellerCode, m_n.FullName as modellerName, d.act1 as actuaryCode, a_n.FullName as actuaryName, FORMAT(d.expirydate,'MM-dd-yyyy') as expiryDate, d.source as brokerCode, n3.Name as brokerName, d.bbroker as brokerContactCode, n5.Name as brokerContactName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.dealnum = </DealDetailsByDealNumber>
  <RolePersonsLookup>select CONCAT(FirstName, ' ', LastName) AS name, CAST(PersonId AS Varchar(MAX)) as value, cfgr.Name AS [group], CASE WHEN cfgr.active = 1 THEN 'true' WHEN cfgr.active = 0 THEN 'false' END AS isActive from tb_person tbp INNER JOIN cfgRolePerson cfgrp ON tbp.PersonId = cfgrp.PersonNameFK INNER JOIN cfgRole as cfgr ON cfgrp.RoleFK = cfgr.RolePK WHERE cfgr.Name in (</RolePersonsLookup>
  <DealFieldByDealNumber>FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.dealnum = </DealFieldByDealNumber>
</Queries>
