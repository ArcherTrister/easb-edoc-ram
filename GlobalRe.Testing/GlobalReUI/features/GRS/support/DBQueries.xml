<Queries>
  <DatabaseVerification>
    <GlobalReDataView>select distinct(division) from [DEV_ERMS].[GRS].[v_GRSDeals];</GlobalReDataView>
  </DatabaseVerification>
  <DealCount>
    <BoundDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 0 AND NOT EXISTS (SELECT 1 FROM dbo.tb_chklistvals tc WHERE tc.entitynum = 1 AND tc.chklistnum = 100 AND tc.key1 = d.dealnum)</BoundDealCountByStatus>
    <OnHoldDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 16</OnHoldDealCountByStatus>
    <InProgressDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3,80,2,14,29)</InProgressDealCountByStatus>
    <UnderReviewDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3)</UnderReviewDealCountByStatus>
    <AuthorizeDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (80)</AuthorizeDealCountByStatus>
    <OutstandingQuoteDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (2)</OutstandingQuoteDealCountByStatus>
    <ToBeDeclinedDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (14)</ToBeDeclinedDealCountByStatus>
    <BoundPendingDataEntryDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (29)</BoundPendingDataEntryDealCountByStatus>
    <RenewableDealCountByStatus>SELECT count(*) AS totalRecords FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND (d.inceptdate #= GETDATE()) AND (d.termdate IS NULL) AND (d.expirydate BETWEEN DATEADD(DAY, 1, EOMONTH(GETDATE())) AND EOMONTH(GETDATE(), 6) ) AND (d.status = 0)</RenewableDealCountByStatus>
  </DealCount>
  <Deals>
    <ActualBoundDealByStatus>SELECT TOP 10 d.dealname as dealName,d.contractnum as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,dp.ModelPriority as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,d.dealnum as dealNumber,uw_n.FullName as primaryUnderwriterName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 0 AND NOT EXISTS (SELECT 1 FROM dbo.tb_chklistvals tc WHERE tc.entitynum = 1 AND tc.chklistnum = 100 AND tc.key1 = d.dealnum)</ActualBoundDealByStatus>
    <ActualOnHoldDealByStatus>SELECT TOP 10 d.dealname as dealName,d.contractnum as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,dp.ModelPriority as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,d.dealnum as dealNumber,uw_n.FullName as primaryUnderwriterName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 0 AND NOT EXISTS (SELECT 1 FROM dbo.tb_chklistvals tc WHERE tc.entitynum = 1 AND tc.chklistnum = 100 AND tc.key1 = d.dealnum)</ActualOnHoldDealByStatus>
    <BoundDealByStatus>SELECT TOP 6 d.dealname as dealName,d.contractnum as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,dp.ModelPriority as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,d.dealnum as dealNumber,uw_n.FullName as primaryUnderwriterName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 0 AND NOT EXISTS (SELECT 1 FROM dbo.tb_chklistvals tc WHERE tc.entitynum = 1 AND tc.chklistnum = 100 AND tc.key1 = d.dealnum)</BoundDealByStatus>
    <OnHoldDealByStatus>SELECT TOP 6 d.dealname as dealName,d.contractnum as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,dp.ModelPriority as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,d.dealnum as dealNumber,uw_n.FullName as primaryUnderwriterName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 16</OnHoldDealByStatus>
    <InProgressDealByStatus>SELECT TOP 6 d.dealname as dealName,d.contractnum as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,dp.ModelPriority as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,d.dealnum as dealNumber,uw_n.FullName as primaryUnderwriterName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3,80,2,14,29)</InProgressDealByStatus>
    <UnderReviewDealByStatus>SELECT TOP 6 d.dealname as dealName,d.contractnum as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,dp.ModelPriority as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,d.dealnum as dealNumber,uw_n.FullName as primaryUnderwriterName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3)</UnderReviewDealByStatus>
    <AuthorizeDealByStatus>SELECT TOP 6 d.dealname as dealName,d.contractnum as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,dp.ModelPriority as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,d.dealnum as dealNumber,uw_n.FullName as primaryUnderwriterName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (80)</AuthorizeDealByStatus>
    <OutstandingQuoteDealByStatus>SELECT TOP 6 d.dealname as dealName,d.contractnum as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,dp.ModelPriority as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,d.dealnum as dealNumber,uw_n.FullName as primaryUnderwriterName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (2)</OutstandingQuoteDealByStatus>
    <ToBeDeclinedDealByStatus>SELECT TOP 6 d.dealname as dealName,d.contractnum as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,dp.ModelPriority as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,d.dealnum as dealNumber,uw_n.FullName as primaryUnderwriterName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (14)</ToBeDeclinedDealByStatus>
    <BoundPendingDataEntryDealByStatus>SELECT TOP 6 d.dealname as dealName,d.contractnum as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,dp.ModelPriority as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,d.dealnum as dealNumber,uw_n.FullName as primaryUnderwriterName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (29)</BoundPendingDataEntryDealByStatus>
    <RenewableDealByStatus>SELECT TOP 6 d.dealname as dealName,d.contractnum as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,dp.ModelPriority as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,d.dealnum as dealNumber,uw_n.FullName as primaryUnderwriterName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND (d.inceptdate #= GETDATE()) AND (d.termdate IS NULL) AND (d.expirydate BETWEEN DATEADD(DAY, 1, EOMONTH(GETDATE())) AND EOMONTH(GETDATE(), 6) ) AND (d.status = 0)</RenewableDealByStatus>
  </Deals>
  <DealsCOMMON>
    <ActualBoundDByStatus>SELECT TOP 10 d.dealname as dealName,CAST(d.contractnum as contractNumber AS INT), FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,CAST(dp.ModelPriority as priority AS INT),FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,CAST(d.dealnum as dealNumber AS INT),uw_n.FullName as primaryUnderwriterName,uw2_n.FullName as secondaryUnderwriterName,ta_n.FullName as technicalAssistantName,m_n.FullName as modellerName, a_n.FullName as actuaryName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 0 AND NOT EXISTS (SELECT 1 FROM dbo.tb_chklistvals tc WHERE tc.entitynum = 1 AND tc.chklistnum = 100 AND tc.key1 = d.dealnum)</ActualBoundDByStatus>
    <ActualOnHoldDByStatus>SELECT TOP 10 d.dealname as dealName,CAST(d.contractnum as contractNumber AS INT), FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,CAST(dp.ModelPriority as priority AS INT),FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,CAST(d.dealnum as dealNumber AS INT),uw_n.FullName as primaryUnderwriterName ,uw2_n.FullName as secondaryUnderwriterName,ta_n.FullName as technicalAssistantName,m_n.FullName as modellerName, a_n.FullName as actuaryName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 0 AND NOT EXISTS (SELECT 1 FROM dbo.tb_chklistvals tc WHERE tc.entitynum = 1 AND tc.chklistnum = 100 AND tc.key1 = d.dealnum)</ActualOnHoldDByStatus>
    <BoundDByStatus>SELECT TOP 6 d.dealname as dealName,CAST(d.contractnum AS INT) as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,CAST(dp.ModelPriority AS INT) as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,CAST(d.dealnum AS INT)  as dealNumber,uw_n.FullName as primaryUnderwriterName ,uw2_n.FullName as secondaryUnderwriterName,ta_n.FullName as technicalAssistantName,m_n.FullName as modellerName, a_n.FullName as actuaryName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 0 AND NOT EXISTS (SELECT 1 FROM dbo.tb_chklistvals tc WHERE tc.entitynum = 1 AND tc.chklistnum = 100 AND tc.key1 = d.dealnum)</BoundDByStatus>
    <OnHoldDByStatus>SELECT TOP 6 d.dealname as dealName,CAST(d.contractnum AS INT) as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,CAST(dp.ModelPriority AS INT) as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,CAST(d.dealnum AS INT)  as dealNumber,uw_n.FullName as primaryUnderwriterName ,uw2_n.FullName as secondaryUnderwriterName,ta_n.FullName as technicalAssistantName,m_n.FullName as modellerName, a_n.FullName as actuaryName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status = 16</OnHoldDByStatus>
    <InProgressDByStatus>SELECT TOP 6 d.dealname as dealName,CAST(d.contractnum AS INT) as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,CAST(dp.ModelPriority AS INT) as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,CAST(d.dealnum AS INT)  as dealNumber,uw_n.FullName as primaryUnderwriterName ,uw2_n.FullName as secondaryUnderwriterName,ta_n.FullName as technicalAssistantName,m_n.FullName as modellerName, a_n.FullName as actuaryName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3,80,2,14,29)</InProgressDByStatus>
    <UnderReviewDByStatus>SELECT TOP 6 d.dealname as dealName,CAST(d.contractnum AS INT) as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,CAST(dp.ModelPriority AS INT) as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,CAST(d.dealnum AS INT)  as dealNumber,uw_n.FullName as primaryUnderwriterName ,uw2_n.FullName as secondaryUnderwriterName,ta_n.FullName as technicalAssistantName,m_n.FullName as modellerName, a_n.FullName as actuaryName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (3)</UnderReviewDByStatus>
    <AuthorizeDByStatus>SELECT TOP 6 d.dealname as dealName,CAST(d.contractnum AS INT) as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,CAST(dp.ModelPriority AS INT) as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,CAST(d.dealnum AS INT)  as dealNumber,uw_n.FullName as primaryUnderwriterName ,uw2_n.FullName as secondaryUnderwriterName,ta_n.FullName as technicalAssistantName,m_n.FullName as modellerName, a_n.FullName as actuaryName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (80)</AuthorizeDByStatus>
    <OutstandingQuoteDByStatus>SELECT TOP 6 d.dealname as dealName,CAST(d.contractnum AS INT) as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,CAST(dp.ModelPriority AS INT) as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,CAST(d.dealnum AS INT)  as dealNumber,uw_n.FullName as primaryUnderwriterName ,uw2_n.FullName as secondaryUnderwriterName,ta_n.FullName as technicalAssistantName,m_n.FullName as modellerName, a_n.FullName as actuaryName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (2)</OutstandingQuoteDByStatus>
    <ToBeDeclinedDByStatus>SELECT TOP 6 d.dealname as dealName,CAST(d.contractnum AS INT) as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,CAST(dp.ModelPriority AS INT) as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,CAST(d.dealnum AS INT)  as dealNumber,uw_n.FullName as primaryUnderwriterName ,uw2_n.FullName as secondaryUnderwriterName,ta_n.FullName as technicalAssistantName,m_n.FullName as modellerName, a_n.FullName as actuaryName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (14)</ToBeDeclinedDByStatus>
    <BoundPendingDataEntryDByStatus>SELECT TOP 6 d.dealname as dealName,CAST(d.contractnum AS INT) as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,CAST(dp.ModelPriority AS INT) as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,CAST(d.dealnum AS INT)  as dealNumber,uw_n.FullName as primaryUnderwriterName ,uw2_n.FullName as secondaryUnderwriterName,ta_n.FullName as technicalAssistantName,m_n.FullName as modellerName, a_n.FullName as actuaryName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.status IN (29)</BoundPendingDataEntryDByStatus>
    <RenewableDByStatus>SELECT TOP 6 d.dealname as dealName,CAST(d.contractnum AS INT) as contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,CAST(dp.ModelPriority AS INT) as priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,CAST(d.dealnum AS INT)  as dealNumber,uw_n.FullName as primaryUnderwriterName ,uw2_n.FullName as secondaryUnderwriterName,ta_n.FullName as technicalAssistantName,m_n.FullName as modellerName, a_n.FullName as actuaryName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0 AND tb.busdiv IN ('MGR','FED','CHUB') AND (d.inceptdate #= GETDATE()) AND (d.termdate IS NULL) AND (d.expirydate BETWEEN DATEADD(DAY, 1, EOMONTH(GETDATE())) AND EOMONTH(GETDATE(), 6) ) AND (d.status = 0)</RenewableDByStatus>
  </DealsCOMMON>
  <New-Team-Divisions>
    <CasualtyTeam>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('CA - Auto','CA - CA','CA - GL','CA - PL','CA - Cas Fac')))</CasualtyTeam>
    <CasualtyTreatySubOption>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('CA - Auto','CA - CA','CA - GL','CA - PL')))</CasualtyTreatySubOption>
    <CasualtyFacSubOption>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('CA - Cas Fac')))</CasualtyFacSubOption>
    <PropertyTeam>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('Property International','Property North America')))</PropertyTeam>
    <PropertyInternationalSubOption>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('Property International')))</PropertyInternationalSubOption>
    <PropertyNorthAmericaSubOption>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('Property North America')))</PropertyNorthAmericaSubOption>
    <SpecialtyTeam>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('SP - A#H','SP - Agri','SP - Agri - Arc','SP - AV','SP - LPT','SP - M#E','SP - Mortgage','SP - Other','SP - SC','SP - Terrorism','SP - Terrorism - Arc','SP - WC','Whole Account','SP - Public Entity')))</SpecialtyTeam>
    <SpecialtyNon-PESubOption>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('SP - A#H','SP - Agri','SP - Agri - Arc','SP - AV','SP - LPT','SP - M#E','SP - Mortgage','SP - Other','SP - SC','SP - Terrorism','SP - Terrorism - Arc','SP - WC','Whole Account')))</SpecialtyNon-PESubOption>
    <PublicEntitySubOption>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('SP - Public Entity')))</PublicEntitySubOption>
    <AllTeams>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('CA - Auto','CA - CA','CA - GL','CA - PL','CA - Cas Fac','Property International','Property North America','SP - A#H','SP - Agri','SP - Agri - Arc','SP - AV','SP - LPT','SP - M#E','SP - Mortgage','SP - Other','SP - SC','SP - Terrorism','SP - Terrorism - Arc','SP - WC','Whole Account','SP - Public Entity')))</AllTeams>
  </New-Team-Divisions>
  <PersonProfile>
    <UWManagerPersonProfile>SET ANSI_NULLS, ANSI_WARNINGS, ANSI_PADDING ON; SET QUOTED_IDENTIFIER OFF; select STUFF(( SELECT DISTINCT ' ,' + CAST(t.ExposureGroup AS varchar(max)) FROM grs.v_GRSSubdivisionExposure t INNER JOIN dbo.cfgSetting s ON s.Name = 'Subdivisions Defaults' INNER JOIN dbo.cfgFact f ON f.SettingFK = s.SettingPK LEFT OUTER JOIN dbo.cfgRole r ON r.RolePK = f.RoleFK LEFT OUTER JOIN tb_person p ON f.PersonFK = p.PersonId WHERE f.FactValue = cast(t.ExposureGroupID AS varchar(5)) AND f.RoleFK IN (SELECT DISTINCT crp.RoleFK  FROM tb_user u join dbo.tb_userLogins tul ON u.userid = tul.userid AND u.IsEnabled = 1 AND tul.IsEnabled = u.IsEnabled JOIN dbo.tb_Person tp ON tp.PersonSID = u.ContactNum JOIN dbo.cfgRolePerson crp ON crp.PersonNameFK = tp.PersonId WHERE tul.LoginName LIKE 'Andrew%Barnard%@markel%') AND (f.PersonFK IN (SELECT DISTINCT tp.PersonId  FROM tb_user u join dbo.tb_userLogins tul ON u.userid = tul.userid AND u.IsEnabled = 1 AND tul.IsEnabled = u.IsEnabled JOIN dbo.tb_Person tp ON tp.PersonSID = u.ContactNum JOIN dbo.cfgRolePerson crp ON crp.PersonNameFK = tp.PersonId WHERE tul.LoginName LIKE 'Andrew%Barnard%@markel%') OR f.PersonFK IS NULL ) FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,2,'') AS subDivisions; SET ANSI_NULLS, ANSI_WARNINGS, ANSI_PADDING OFF;  SET QUOTED_IDENTIFIER ON;</UWManagerPersonProfile>
    <PTAPersonProfile>SET ANSI_NULLS, ANSI_WARNINGS, ANSI_PADDING ON; SET QUOTED_IDENTIFIER OFF; select STUFF(( SELECT DISTINCT ' ,' + CAST(t.ExposureGroup AS varchar(max)) FROM grs.v_GRSSubdivisionExposure t INNER JOIN dbo.cfgSetting s ON s.Name = 'Subdivisions Defaults' INNER JOIN dbo.cfgFact f ON f.SettingFK = s.SettingPK LEFT OUTER JOIN dbo.cfgRole r ON r.RolePK = f.RoleFK LEFT OUTER JOIN tb_person p ON f.PersonFK = p.PersonId WHERE f.FactValue = cast(t.ExposureGroupID AS varchar(5)) AND f.RoleFK IN (SELECT DISTINCT crp.RoleFK  FROM tb_user u join dbo.tb_userLogins tul ON u.userid = tul.userid AND u.IsEnabled = 1 AND tul.IsEnabled = u.IsEnabled JOIN dbo.tb_Person tp ON tp.PersonSID = u.ContactNum JOIN dbo.cfgRolePerson crp ON crp.PersonNameFK = tp.PersonId WHERE tul.LoginName LIKE 'Elena.Marshall%@markelcorp%') AND (f.PersonFK IN (SELECT DISTINCT tp.PersonId  FROM tb_user u join dbo.tb_userLogins tul ON u.userid = tul.userid AND u.IsEnabled = 1 AND tul.IsEnabled = u.IsEnabled JOIN dbo.tb_Person tp ON tp.PersonSID = u.ContactNum JOIN dbo.cfgRolePerson crp ON crp.PersonNameFK = tp.PersonId WHERE tul.LoginName LIKE 'Elena.Marshall%@markelcorp%') OR f.PersonFK IS NULL ) FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'),1,2,'') AS subDivisions; SET ANSI_NULLS, ANSI_WARNINGS, ANSI_PADDING OFF;  SET QUOTED_IDENTIFIER ON;</PTAPersonProfile>
  </PersonProfile>
  <PropertyTA>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (SELECT te.exposuretype FROM dbo.tb_exposetype te WHERE te.exposurename IN ('Property International','Property North America')))</PropertyTA>
  <NotUsed>
    <DealCountByStatus>SELECT ci.code AS 'statusid' , ci.name AS 'statusName', ISNULL(deals.Count,0) AS count FROM dbo.tb_catalogitems ci LEFT OUTER JOIN (SELECT d.status, COUNT(d.dealnum) AS 'Count' FROM GRS.v_GRDeals d WHERE d.inceptdate > '20171001' GROUP BY d.status) deals ON deals.status  = ci.code WHERE ci.catid = 7  AND ci.active = 1 AND ci.code IN (80, 2, 3, 29, 14) ORDER BY ci.catorder;</DealCountByStatus>
  </NotUsed>
  <UserFullName>SELECT (Firstname + ' ' + LastName) as displayName from tb_person where PersonId = (SELECT TOP 1 tn.NameId FROM dbo.tb_Names tn WHERE tn.Name like '%Boya%Venkatesh%' ORDER BY tn.NameId desc)</UserFullName>
  <FetchUserName>SELECT (Firstname + ' ' + LastName) as displayName FROM dbo.tb_user tu
  JOIN dbo.tb_userLogins tul ON tu.userid = tul.UserID
    WHERE tul.LoginName LIKE </FetchUserName>
  <UWManager>AND d.exposuretype IN (SELECT distinct b.exposure FROM (SELECT exptype1,ve.exptype2 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION SELECT exptype1,ve.exptype3 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT exptype1,exptype1 AS exposure FROM dbo.V_exposuretree ve WHERE ve.etmnum = 7 UNION  SELECT tem.exptype1,tem.exptype1 FROM dbo.tb_exp_map tem WHERE tem.etmnum = 7 AND NOT exists (SELECT * FROM dbo.tb_exp_map_dtl temd WHERE temd.exptype1 = tem.exptype1 AND temd.etmnum = 7)) b where b.exposure IS NOT NULL AND b.exptype1 IN (select distinct  t.exposuretype   FROM grs.v_GRSSubdivisionExposure t INNER JOIN dbo.cfgSetting s ON s.Name = 'Subdivisions Defaults' INNER JOIN dbo.cfgFact f ON f.SettingFK = s.SettingPK LEFT OUTER JOIN dbo.cfgRole r ON r.RolePK = f.RoleFK LEFT OUTER JOIN tb_person p ON f.PersonFK = p.PersonId WHERE f.FactValue = cast(t.ExposureGroupID AS varchar(5)) AND f.RoleFK IN (SELECT DISTINCT crp.RoleFK  FROM tb_user u join dbo.tb_userLogins tul ON u.userid = tul.userid AND u.IsEnabled = 1 AND tul.IsEnabled = u.IsEnabled JOIN dbo.tb_Person tp ON tp.PersonSID = u.ContactNum JOIN dbo.cfgRolePerson crp ON crp.PersonNameFK = tp.PersonId WHERE tul.LoginName LIKE 'Andrew%Barnard%@markel%') AND (f.PersonFK IN (SELECT DISTINCT tp.PersonId  FROM tb_user u join dbo.tb_userLogins tul ON u.userid = tul.userid AND u.IsEnabled = 1 AND tul.IsEnabled = u.IsEnabled JOIN dbo.tb_Person tp ON tp.PersonSID = u.ContactNum JOIN dbo.cfgRolePerson crp ON crp.PersonNameFK = tp.PersonId WHERE tul.LoginName LIKE 'Andrew%Barnard%@markel%') OR f.PersonFK IS NULL )))</UWManager>
  <SETUSERENV>SET ANSI_NULLS, ANSI_WARNINGS, ANSI_PADDING ON; SET QUOTED_IDENTIFIER OFF; </SETUSERENV>
  <UNSETUSERENV>SET ANSI_NULLS, ANSI_WARNINGS, ANSI_PADDING OFF; SET QUOTED_IDENTIFIER ON; </UNSETUSERENV>
  <DealNeededDetailsByDealNumber>SELECT d.dealnum as dealNumber, d.dealname as dealName, FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate, dp.ModelPriority as priority, st.name as status, uw_n.FullName as primaryUnderwriterName, uw2_n.FullName as secondaryUnderwriterName, ta_n.FullName as technicalAssistantName, m_n.FullName as modellerName, a_n.FullName as actuaryName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.dealnum = </DealNeededDetailsByDealNumber>
  <DealDetailsByDealNumber>SELECT d.dealname as dealName,CAST(d.contractnum as INT) AS contractNumber, FORMAT(d.inceptdate,'MM-dd-yyyy') as inceptionDate,FORMAT(d.targetdt,'MM-dd-yyyy') as targetDate,CAST(dp.ModelPriority as INT) AS priority,FORMAT(d.submissiondate,'MM-dd-yyyy') as submittedDate,st.name as status,CAST(d.dealnum as INT) AS dealNumber,uw_n.FullName as primaryUnderwriterName,uw2_n.FullName as secondaryUnderwriterName,ta_n.FullName as technicalAssistantName,m_n.FullName as modellerName, a_n.FullName as actuaryName FROM dbo.tbl_deals d JOIN dbo.dmUnderwritingTeam t ON t.UnderwritingTeamPK=d.producer JOIN dbo.tb_paper p ON p.papernum=d.paper JOIN dbo.tb_teambuc tb ON tb.paper=d.paper AND tb.team=t.UnderwritingTeamPK LEFT OUTER JOIN dbo.tb_deal_pipeline dp ON dp.DealNum = d.dealnum LEFT OUTER JOIN dbo.fnDWgetCatalogItems(7) st ON st.code=d.status LEFT OUTER JOIN tb_Names uw_n ON uw_n.NameId=d.uw1 LEFT OUTER JOIN tb_Names uw2_n ON uw2_n.NameId=d.uw2 LEFT OUTER JOIN tb_Names ta_n ON ta_n.NameId=dp.TA LEFT OUTER JOIN tb_Names m_n ON m_n.NameId=d.Modeller LEFT OUTER JOIN tb_Names a_n ON a_n.NameId=d.act1 LEFT OUTER JOIN tb_Names n3 ON (d.source = n3.NameId) LEFT OUTER JOIN tb_Names n5 ON (d.bbroker = n5.NameId) WHERE d.dealnum > 0  AND tb.busdiv IN ('MGR','FED','CHUB') AND d.dealnum =</DealDetailsByDealNumber>
  <NotesUpdate>select notes from [grs].[v_GRSNotes] where dealnum = </NotesUpdate>
  <Documents>
    <keyDocuments>SELECT count(*) AS totalRecords from [grs].[v_KeyDocuments] where [filenumber] = </keyDocuments>
  </Documents>
</Queries>
